<h1 id="aws-cli">AWS CLI</h1>
<p>AWS CLI 是 AWS 提供的命令行工具，使用 Python 开发支持 Python 2.6.5 以上绝大多数 Python 版本。</p>
<h2 id="安装">安装</h2>
<p>在 Unix/Linux 平台安装 AWS CLI 建议使用 pip：</p>
<pre class="sh"><code>pip install aws-cli</code></pre>
<p>注意这里是&quot;aws-cli&quot;而不是&quot;aws&quot;</p>
<p>个人还推荐一个叫做 saws 的 aws-cli 封装包，提供了强大的命令补全功能：</p>
<pre class="sh"><code>pip install saws</code></pre>
<h2 id="配置">配置</h2>
<p>在使用 aws-cli 之前，你首先需要配置好个人身份信息以及偏好区域。 配置个人身份信息前还需要注册 AWS ISM，并为自己的身份授予对应的权限。</p>
<p>AWS 的配置文件分 config 和 credentials，默认存储在 ~/.aws 目录中，格式如下：</p>
<pre class="sourceCode ini"><code class="sourceCode ini"><span class="co"># ~/.aws/credentials</span>
<span class="kw">[default]</span>
aws_access_key_id<span class="ot">=</span><span class="st">XXXXXXXXXXXXXXXXXXXX</span>
aws_secret_access_key<span class="ot">=</span><span class="st">XXXXXXXXXXXXXXXXXXXX</span>
<span class="er">[user1]</span>
aws_access_key_id<span class="ot">=</span><span class="st">XXXXXXXXXXXXXXXXXXXX</span>
aws_secret_access_key<span class="ot">=</span><span class="st">XXXXXXXXXXXXXXXXXXXX</span></code></pre>
<pre class="sourceCode ini"><code class="sourceCode ini"><span class="co"># ~/.aws/config</span>
<span class="kw">[default]</span>
region<span class="ot">=</span><span class="st">cn-north</span><span class="dv">-1</span>
output<span class="ot">=</span><span class="st">json</span>
<span class="er">[user1]</span>
region<span class="ot">=</span><span class="st">us-west</span><span class="dv">-2</span>
output<span class="ot">=</span><span class="st">text</span></code></pre>
<p>参数解释：</p>
<ul>
<li><code>aws_access_key_id</code>：AWS 访问密钥。</li>
<li><code>aws_secret_access_key</code>：AWS 私有密钥。</li>
<li><code>aws_session_token</code>：AWS 会话令牌。只有在使用临时安全证书时才需要会话令牌。</li>
<li><code>region</code>：AWS 区域。</li>
<li><code>output</code>：输出格式（json、text 或 table）</li>
</ul>
<h3 id="配置多用户">配置多用户</h3>
<h3 id="环境变量">环境变量</h3>
<p>AWS CLI 支持以下变量：</p>
<ul>
<li><code>AWS_ACCESS_KEY_ID</code>：AWS 访问密钥。</li>
<li><code>AWS_SECRET_ACCESS_KEY</code>：AWS 私有密钥。访问和私有密钥变量会覆盖证书和 config 文件中存储的证书。</li>
<li><code>AWS_SESSION_TOKEN</code>：会话令牌。只有在使用临时安全证书时才需要会话令牌。</li>
<li><code>AWS_DEFAULT_REGION</code>：AWS 区域。如果设置，此变量会覆盖正在使用的配置文件的默认区域。</li>
<li><code>AWS_DEFAULT_PROFILE</code>：要使用的 CLI 配置文件的名称。可以是存储在证书或 config 文件中的配置文件的名称，也可以是 default，后者使用默认配置文件。</li>
<li><code>AWS_CONFIG_FILE</code>：CLI config 文件的路径。</li>
</ul>
<h2 id="命令行参数">命令行参数</h2>
<p>参考：<a href="http://docs.aws.amazon.com/zh_cn/cli/latest/userguide/cli-chap-getting-started.html">AWS 官方文档</a></p>
